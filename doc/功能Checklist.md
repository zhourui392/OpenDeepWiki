# OpenDeepWiki 功能Checklist

## 1. Git仓库管理

| 功能 | 状态 | 说明 |
|------|------|------|
| 添加仓库 | ✅ | 通过Git URL添加仓库(GitHub/GitLab/Gitee) |
| 自定义提交仓库 | ⬜ | 自定义配置提交仓库 |
| 上传文件提交仓库 | ⬜ | 上传压缩包创建仓库 |
| 仓库列表 | ⚠️ | 分页展示所有仓库 (SQLite时间戳兼容问题) |
| 仓库同步 | ✅ | 手动/自动同步Git仓库代码 |
| 分支管理 | ⬜ | 获取和切换Git分支 |
| 私有仓库支持 | ⬜ | 配置用户名密码访问私有仓库 |
| 仓库统计 | ⬜ | 统计文件数、文档数、目录数 |
| 批量删除 | ⬜ | 批量删除仓库 |
| 批量启用/禁用 | ⬜ | 批量启用或禁用仓库 |
| 批量同步 | ⬜ | 批量触发仓库同步 |
| 文件浏览 | ⬜ | 浏览仓库文件内容 |
| 按行读取文件 | ⬜ | 指定行号范围读取文件 |
| Markdown导出 | ⬜ | 导出仓库Markdown文档为ZIP |

## 2. 仓库同步管理

| 功能 | 状态 | 说明 |
|------|------|------|
| 触发同步 | ✅ | 手动触发仓库同步 |
| 同步状态查询 | ⬜ | 查询仓库同步状态 |
| 同步记录查询 | ⬜ | 查询历史同步记录 |
| 取消同步 | ⬜ | 取消进行中的同步任务 |
| 重试同步 | ⬜ | 重试失败的同步任务 |
| 运行中任务查询 | ⬜ | 查询当前运行中的同步任务 |

## 3. AI文档生成

| 功能 | 状态 | 说明 |
|------|------|------|
| 项目架构文档生成 | ⚠️ | 自动分析项目结构生成架构文档 (Claude Agent可用性检查问题) |
| 批量文档生成 | ⬜ | 扫描仓库所有Java文件批量生成文档 |
| 按服务生成文档 | ⬜ | 按服务模块分组生成文档 |
| AI文档列表 | ⬜ | 查看AI生成的文档列表 |
| AI文档详情 | ⬜ | 查看单个AI文档内容 |
| 文档统计 | ⬜ | 统计文档生成数量、成功率 |
| 文档状态跟踪 | ⬜ | 跟踪文档生成状态(生成中/完成/失败) |
| 系统说明文档生成 | ✅ | Claude CLI调用成功，文档生成成功 |

## 4. 领域驱动设计(DDD)支持

| 功能 | 状态 | 说明 |
|------|------|------|
| 领域列表 | ⬜ | 获取仓库下的领域列表 |
| 创建领域 | ⬜ | 创建新领域 |
| 编辑领域 | ⬜ | 更新领域信息 |
| 删除领域 | ⬜ | 删除领域 |
| 领域文档生成 | ⬜ | 为领域生成说明文档 |
| 服务列表 | ⬜ | 获取领域下的服务列表 |
| 创建服务 | ⬜ | 在领域下创建服务 |
| 编辑服务 | ⬜ | 更新服务配置 |
| 删除服务 | ⬜ | 删除服务 |
| 服务文档生成 | ⬜ | 为服务生成技术文档 |
| 源码匹配 | ⬜ | 通过Glob模式匹配服务相关源码 |

## 5. 业务流程分析

| 功能 | 状态 | 说明 |
|------|------|------|
| 服务依赖分析 | ⬜ | 分析项目间的服务依赖关系 |
| 业务流程生成 | ⬜ | 基于入口点生成业务调用链路 |
| 批量业务流程生成 | ⬜ | 生成所有业务流程 |
| 调用链追踪 | ⬜ | 追踪方法调用深度和路径 |
| Mermaid图生成 | ⬜ | 生成业务流程的Mermaid可视化图 |

## 6. 代码分析

| 功能 | 状态 | 说明 |
|------|------|------|
| 项目扫描 | ✅ | 扫描项目结构、模块、包 |
| 入口点检测 | ✅ | 检测HTTP接口、Dubbo服务、定时任务、MQ消费者 |
| 依赖分析 | ⬜ | 分析Maven依赖、服务间依赖 |
| Java代码解析 | ✅ | 使用JavaParser解析Java代码结构 |
| README分析 | ⬜ | 提取项目README信息 |

## 7. AI通用功能

| 功能 | 状态 | 说明 |
|------|------|------|
| README生成 | ⬜ | AI生成项目README |
| AI问答 | ⬜ | 基于项目的AI问答 |
| 标签生成 | ⬜ | AI生成项目标签 |
| 技术栈分析 | ⬜ | AI分析项目技术栈 |
| 项目描述 | ⬜ | AI生成项目描述 |

## 8. 提示词模板管理

| 功能 | 状态 | 说明 |
|------|------|------|
| 模板列表 | ⬜ | 获取提示词模板列表 |
| 模板详情 | ⬜ | 查看模板详情 |
| 创建模板 | ⬜ | 创建新的提示词模板 |
| 编辑模板 | ⬜ | 更新提示词模板 |
| 删除模板 | ⬜ | 删除提示词模板 |

## 9. 统计分析

| 功能 | 状态 | 说明 |
|------|------|------|
| 每日统计 | ⬜ | 统计每日访问量、用户数、响应时间 |
| 趋势分析 | ⬜ | 分析访问趋势、文档生成趋势 |
| 汇总统计 | ⬜ | 获取统计汇总数据 |
| 访问日志记录 | ✅ | 记录用户访问行为 |

## 10. 定时任务

| 功能 | 状态 | 说明 |
|------|------|------|
| 仓库同步任务 | ✅ | 定时同步Git仓库(默认每6小时) |
| 文档同步任务 | ⬜ | 定时同步领域文档(默认每天凌晨2点) |
| 统计计算任务 | ⬜ | 定时计算统计数据 |
| 访问日志处理 | ✅ | 定时处理访问日志 |

## 11. 前端页面

| 页面 | 状态 | 说明 |
|------|------|------|
| 首页 | ✅ | 欢迎页面 |
| 仓库列表页 | ⚠️ | 显示所有Git仓库,支持添加、同步、删除 (SQLite时间戳问题) |
| 仓库详情页 | ⬜ | 显示仓库详细信息和文档目录 |
| 文档查看页 | ⬜ | 查看Markdown文档内容 |
| 领域管理页 | ⬜ | 管理领域和服务,生成文档 |
| AI文档列表页 | ⬜ | 显示AI生成的文档列表 |
| AI文档详情页 | ⬜ | 查看AI生成的文档内容 |
| Agents页面 | ⬜ | 显示可用的AI Agent列表 |

## 12. 系统功能

| 功能 | 状态 | 说明 |
|------|------|------|
| 健康检查 | ✅ | API健康检查接口 |
| 用户管理 | ⬜ | 用户CRUD |
| 角色管理 | ⬜ | 角色权限管理 |
| 数据库迁移 | ✅ | Flyway自动迁移 |

---

## 状态说明

- ⬜ 待验证
- ✅ 已验证通过
- ⚠️ 部分通过/有问题
- ❌ 验证失败

## 已知问题

1. **SQLite时间戳兼容问题**: Hibernate保存Date时使用毫秒时间戳，SQLite JDBC读取时期望日期字符串格式，导致查询失败
2. **Claude Agent可用性检查**: 首次检查时报告不可用，但实际可以执行

## 验证通过的核心功能

1. ✅ 服务启动和健康检查
2. ✅ 数据库迁移 (Flyway)
3. ✅ 添加Git仓库
4. ✅ Git仓库克隆和同步
5. ✅ Claude Code CLI调用
6. ✅ AI文档生成 (系统说明文档)
7. ✅ 前端页面加载
8. ✅ 访问日志记录

## 数据库表

| 表名 | 说明 |
|------|------|
| users | 用户表 |
| roles | 角色表 |
| user_in_roles | 用户角色关联表 |
| warehouses | 仓库表(核心表) |
| warehouse_sync_records | 仓库同步记录表 |
| ai_document | AI文档表 |
| generation_task | 文档生成任务表 |
| access_log | 访问日志表 |
| daily_statistics | 每日统计表 |
| ai_prompt_template | AI提示词模板表 |
| domain_info | 领域信息表 |
| service_document_config | 服务文档配置表 |
| business_flow_documents | 业务流程文档表 |
